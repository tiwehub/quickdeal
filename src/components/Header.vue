<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue'

const isSidebarOpen = ref(false)

function closeSidebar() {
	isSidebarOpen.value = false
}

function handleClickOutside(event: MouseEvent) {
	const sidebar = document.getElementById('sidebar')
	const menuButton = document.getElementById('mobile-menu-button')
	if (
		sidebar &&
		!sidebar.contains(event.target as Node) &&
		!menuButton?.contains(event.target as Node)
	) {
		closeSidebar()
	}
}

onMounted(() => {
	document.addEventListener('click', handleClickOutside)
})

onUnmounted(() => {
	document.removeEventListener('click', handleClickOutside)
})
</script>

<template>
	<header class="header">
		<div class="header__container">
			<input
				type="checkbox"
				id="menu-open"
				class="header__checkbox"
				v-model="isSidebarOpen"
			/>

			<div class="header__top">
				<router-link to="/" class="header__logo-link">
					<svg
						width="21"
						height="22"
						viewBox="0 0 21 22"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
					>
						<path
							d="M9.99917 6.00044H12.9992L16.2892 2.70044C16.3821 2.60671 16.4927 2.53232 16.6146 2.48155C16.7365 2.43078 16.8672 2.40464 16.9992 2.40464C17.1312 2.40464 17.2619 2.43078 17.3837 2.48155C17.5056 2.53232 17.6162 2.60671 17.7092 2.70044L20.2892 5.29044C20.4754 5.4778 20.58 5.73125 20.58 5.99544C20.58 6.25962 20.4754 6.51308 20.2892 6.70044L17.9992 9.00044H9.99917V11.0004C9.99917 11.2657 9.89381 11.52 9.70627 11.7075C9.51874 11.8951 9.26438 12.0004 8.99917 12.0004C8.73395 12.0004 8.4796 11.8951 8.29206 11.7075C8.10452 11.52 7.99917 11.2657 7.99917 11.0004V8.00044C7.99917 7.47001 8.20988 6.9613 8.58495 6.58623C8.96003 6.21115 9.46873 6.00044 9.99917 6.00044ZM3.99917 11.0004V15.0004L1.70917 17.2904C1.52292 17.4778 1.41838 17.7313 1.41838 17.9954C1.41838 18.2596 1.52292 18.5131 1.70917 18.7004L4.28917 21.2904C4.38213 21.3842 4.49273 21.4586 4.61459 21.5093C4.73645 21.5601 4.86716 21.5862 4.99917 21.5862C5.13118 21.5862 5.26189 21.5601 5.38374 21.5093C5.5056 21.4586 5.6162 21.3842 5.70917 21.2904L9.99917 17.0004H13.9992C14.2644 17.0004 14.5187 16.8951 14.7063 16.7075C14.8938 16.52 14.9992 16.2657 14.9992 16.0004V15.0004H15.9992C16.2644 15.0004 16.5187 14.8951 16.7063 14.7075C16.8938 14.52 16.9992 14.2657 16.9992 14.0004V13.0004H17.9992C18.2644 13.0004 18.5187 12.8951 18.7063 12.7075C18.8938 12.52 18.9992 12.2657 18.9992 12.0004V11.0004H11.9992V12.0004C11.9992 12.5309 11.7885 13.0396 11.4134 13.4147C11.0383 13.7897 10.5296 14.0004 9.99917 14.0004H7.99917C7.46873 14.0004 6.96003 13.7897 6.58495 13.4147C6.20988 13.0396 5.99917 12.5309 5.99917 12.0004V9.00044L3.99917 11.0004Z"
							fill="white"
						/>
						<path
							d="M3.88826 9.32673C3.76805 9.44694 3.67612 9.58129 3.57006 9.71564L0.706275 6.85186C0.315952 6.46153 0.317366 5.82655 0.706275 5.43764C1.09518 5.04873 1.73017 5.04732 2.12049 5.43764L4.94892 8.26607L3.88826 9.32673ZM9.19156 1.195L10.6411 2.64457C10.5068 2.75064 10.3724 2.84256 10.2522 2.96277L9.19156 4.02343L7.77734 2.60922C7.38843 2.22031 7.38843 1.58391 7.77734 1.195C8.16625 0.806093 8.80265 0.806093 9.19156 1.195ZM4.24181 3.31632C4.63072 2.92741 5.26711 2.92741 5.65602 3.31632L7.77734 5.43764L6.36313 6.85186L4.24181 4.73054C3.8529 4.34163 3.8529 3.70523 4.24181 3.31632Z"
							fill="white"
						/>
					</svg>
					QuickDeal
				</router-link>

				<label
					for="menu-open"
					id="mobile-menu-button"
					class="header__menu-button"
				>
					<svg
						id="menu-open-icon"
						class="h-6 w-6 transition duration-200 ease-in-out"
						xmlns="http://www.w3.org/2000/svg"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M4 6h16M4 12h16M4 18h16"
						/>
					</svg>
					<svg
						id="menu-close-icon"
						class="h-6 w-6 transition duration-200 ease-in-out"
						xmlns="http://www.w3.org/2000/svg"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M6 18L18 6M6 6l12 12"
						/>
					</svg>
				</label>
			</div>

			<aside id="sidebar" class="sidebar">
				<div class="sidebar__content">
					<a href="#" class="sidebar__link" title="QuickDeal">
						<svg
							width="21"
							height="22"
							viewBox="0 0 21 22"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<path
								d="M9.99917 6.00044H12.9992L16.2892 2.70044C16.3821 2.60671 16.4927 2.53232 16.6146 2.48155C16.7365 2.43078 16.8672 2.40464 16.9992 2.40464C17.1312 2.40464 17.2619 2.43078 17.3837 2.48155C17.5056 2.53232 17.6162 2.60671 17.7092 2.70044L20.2892 5.29044C20.4754 5.4778 20.58 5.73125 20.58 5.99544C20.58 6.25962 20.4754 6.51308 20.2892 6.70044L17.9992 9.00044H9.99917V11.0004C9.99917 11.2657 9.89381 11.52 9.70627 11.7075C9.51874 11.8951 9.26438 12.0004 8.99917 12.0004C8.73395 12.0004 8.4796 11.8951 8.29206 11.7075C8.10452 11.52 7.99917 11.2657 7.99917 11.0004V8.00044C7.99917 7.47001 8.20988 6.9613 8.58495 6.58623C8.96003 6.21115 9.46873 6.00044 9.99917 6.00044ZM3.99917 11.0004V15.0004L1.70917 17.2904C1.52292 17.4778 1.41838 17.7313 1.41838 17.9954C1.41838 18.2596 1.52292 18.5131 1.70917 18.7004L4.28917 21.2904C4.38213 21.3842 4.49273 21.4586 4.61459 21.5093C4.73645 21.5601 4.86716 21.5862 4.99917 21.5862C5.13118 21.5862 5.26189 21.5601 5.38374 21.5093C5.5056 21.4586 5.6162 21.3842 5.70917 21.2904L9.99917 17.0004H13.9992C14.2644 17.0004 14.5187 16.8951 14.7063 16.7075C14.8938 16.52 14.9992 16.2657 14.9992 16.0004V15.0004H15.9992C16.2644 15.0004 16.5187 14.8951 16.7063 14.7075C16.8938 14.52 16.9992 14.2657 16.9992 14.0004V13.0004H17.9992C18.2644 13.0004 18.5187 12.8951 18.7063 12.7075C18.8938 12.52 18.9992 12.2657 18.9992 12.0004V11.0004H11.9992V12.0004C11.9992 12.5309 11.7885 13.0396 11.4134 13.4147C11.0383 13.7897 10.5296 14.0004 9.99917 14.0004H7.99917C7.46873 14.0004 6.96003 13.7897 6.58495 13.4147C6.20988 13.0396 5.99917 12.5309 5.99917 12.0004V9.00044L3.99917 11.0004Z"
								fill="white"
							/>
							<path
								d="M3.88826 9.32673C3.76805 9.44694 3.67612 9.58129 3.57006 9.71564L0.706275 6.85186C0.315952 6.46153 0.317366 5.82655 0.706275 5.43764C1.09518 5.04873 1.73017 5.04732 2.12049 5.43764L4.94892 8.26607L3.88826 9.32673ZM9.19156 1.195L10.6411 2.64457C10.5068 2.75064 10.3724 2.84256 10.2522 2.96277L9.19156 4.02343L7.77734 2.60922C7.38843 2.22031 7.38843 1.58391 7.77734 1.195C8.16625 0.806093 8.80265 0.806093 9.19156 1.195ZM4.24181 3.31632C4.63072 2.92741 5.26711 2.92741 5.65602 3.31632L7.77734 5.43764L6.36313 6.85186L4.24181 4.73054C3.8529 4.34163 3.8529 3.70523 4.24181 3.31632Z"
								fill="white"
							/>
						</svg>
						<span class="sidebar__link-text">QuickDeal</span>
					</a>

					<nav class="sidebar__nav">
						<router-link
							to="/"
							class="sidebar__nav-item"
							active-class="sidebar__nav-item-active"
						>
							<svg
								width="15"
								height="15"
								viewBox="0 0 15 15"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
							>
								<path
									d="M14.0096 4.50751L9.17997 0.577513C8.23616 -0.187486 6.76145 -0.194986 5.82501 0.570013L0.995343 4.50751C0.30223 5.07001 -0.118062 6.19501 0.0294092 7.08001L0.958475 12.735C1.17231 14.0025 2.32995 15 3.59083 15H11.4068C12.6529 15 13.8327 13.98 14.0465 12.7275L14.9756 7.07251C15.1083 6.19501 14.688 5.07001 14.0096 4.50751ZM8.05182 12C8.05182 12.3075 7.80112 12.5625 7.49881 12.5625C7.19649 12.5625 6.94579 12.3075 6.94579 12V9.75C6.94579 9.4425 7.19649 9.1875 7.49881 9.1875C7.80112 9.1875 8.05182 9.4425 8.05182 9.75V12Z"
									fill="white"
								/>
							</svg>
							<span>Главная</span>
						</router-link>
						<router-link
							to="/tasks"
							class="sidebar__nav-item"
							active-class="sidebar__nav-item-active"
						>
							<svg
								width="15"
								height="15"
								viewBox="0 0 15 15"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
							>
								<path
									d="M10.6425 0H4.3575C1.6275 0 0 1.6275 0 4.3575V10.6425C0 13.3725 1.6275 15 4.3575 15H10.6425C13.3725 15 15 13.3725 15 10.6425V4.3575C15 1.6275 13.3725 0 10.6425 0ZM5.9775 9.675L4.29 11.3625C4.1775 11.475 4.035 11.5275 3.8925 11.5275C3.75 11.5275 3.6 11.475 3.495 11.3625L2.9325 10.8C2.7075 10.5825 2.7075 10.2225 2.9325 10.005C3.15 9.7875 3.5025 9.7875 3.7275 10.005L3.8925 10.17L5.1825 8.88C5.4 8.6625 5.7525 8.6625 5.9775 8.88C6.195 9.0975 6.195 9.4575 5.9775 9.675ZM5.9775 4.425L4.29 6.1125C4.1775 6.225 4.035 6.2775 3.8925 6.2775C3.75 6.2775 3.6 6.225 3.495 6.1125L2.9325 5.55C2.7075 5.3325 2.7075 4.9725 2.9325 4.755C3.15 4.5375 3.5025 4.5375 3.7275 4.755L3.8925 4.92L5.1825 3.63C5.4 3.4125 5.7525 3.4125 5.9775 3.63C6.195 3.8475 6.195 4.2075 5.9775 4.425ZM11.67 10.965H7.7325C7.425 10.965 7.17 10.71 7.17 10.4025C7.17 10.095 7.425 9.84 7.7325 9.84H11.67C11.985 9.84 12.2325 10.095 12.2325 10.4025C12.2325 10.71 11.985 10.965 11.67 10.965ZM11.67 5.715H7.7325C7.425 5.715 7.17 5.46 7.17 5.1525C7.17 4.845 7.425 4.59 7.7325 4.59H11.67C11.985 4.59 12.2325 4.845 12.2325 5.1525C12.2325 5.46 11.985 5.715 11.67 5.715Z"
									fill="white"
								/>
							</svg>
							<span>Добавить задачу</span>
						</router-link>
					</nav>
				</div>
			</aside>
		</div>
	</header>
</template>

<style lang="scss" scoped></style>
